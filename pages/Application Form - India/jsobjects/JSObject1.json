{
  "unpublishedCollection": {
    "name": "JSObject1",
    "pageId": "Application Form - India",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tgetAddrLn: (val, addComma = false) => !!val && val.replace(/\\s/g, '').length ? `${val}${addComma ? ' , ' : ''}` : '',\n\tupdateAddress: (address) => {\n\t\tif(address) {\n\t\t\tstoreValue('vayGSTRegAddrr1', this.getAddrLn(address.bno, true) + this.getAddrLn(address.bnm));\n\t\t\tstoreValue('vayGSTRegAddr2', this.getAddrLn(address.st, true) + this.getAddrLn(address.loc));\n\t\t\tstoreValue('vayGSTRegCity', this.getAddrLn(address.city));\n\t\t\tstoreValue('vayGSTRegDistrict', '');\n\t\t\tstoreValue('vayGSTRegState', this.getAddrLn(address.stcd));\n\t\t\tstoreValue('vayGSTRegCountry', 'India');\n\t\t\tstoreValue('vayGSTRegPinCode', this.getAddrLn(''+address.pncd));\n\t\t} else {\n\t\t\tstoreValue('vayGSTRegAddrr1','GSTRegAddrr Line 1');\n\t\t\tstoreValue('vayGSTRegAddrr2','GSTRegAddrr Line 2');\n\t\t\tstoreValue('vayGSTRegCity','GSTRegAddrr City');\n\t\t\tstoreValue('vayGSTRegDistrict','GSTRegAddrr District');\n\t\t\tstoreValue('vayGSTRegState','GSTRegAddrr State');\n\t\t\tstoreValue('vayGSTRegCountry','GSTRegAddrr Country');\n\t\t\tstoreValue('vayGSTRegPinCode','GSTRegAddrr Pincode');\t\n\t\t}\n\t},\n\tonfetchSuccess: () => {\n\t\tconsole.log(vayGSTinEnrichAPI.data.data)\n\t\tshowAlert(`${JSON.parse(vayGSTinEnrichAPI.data.data)}`);\n\t\t\tthis.updateAddress(JSON.parse(vayGSTinEnrichAPI.data.data)?.pradr?.addr);\n\t},\n\tfetchGSTINDetails: async () => {\n\t\t//showAlert(`In fetchGSTINDetails`);\n\t\tawait vayGSTinEnrichAPI.run(this.onfetchSuccess, async (error) => {\n\t\t\tshowAlert(`Error content: ${JSON.stringify(error)}`);\n\t\t\tif(vayGSTinEnrichAPI.data?.error?.message === 'err-expired-token') {\n\t\t\t\tawait APILoginGetAuthToken.run().then(async () => {\n\t\t\t//\t\tshowAlert(`Token refreshed successfully!`);\n\t\t\t\t\tawait vayGSTinEnrichAPI.run(this.onfetchSuccess, undefined, undefined);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\t\n\tloadGSTNdata: async () => {\n\t\tawait selectGSTNQuery.run();\n\t\tif(selectGSTNQuery.data.length > 0) {\n\t\t\tconst record = selectGSTNQuery.data[0];\n\t\t\tthis.updateAddress(record);\n\t\t} \n\t},\n\t\n\tonGSTINInputChange: async () => {\n\t\t\n\t\tif(!vayGSTNInput.isValid) {\n\t\t\treturn;\n\t\t}\n\n\t\t// AS PER DISCUSSION DATED: 25th MAY REPLACING GST API INTEGRATION\n\t\t/* if(!APILoginGetAuthToken.data?.data?.token) {\n\t\t\t\n\t\t\t//showAlert('Token does not exists');\n\n\t\t\treturn APILoginGetAuthToken.run().then(this.fetchGSTINDetails);\n\t\t} else {\n\t\t\t//showAlert('Token exists');\n\t\t\tawait this.fetchGSTINDetails();\n\t\t} */\n\t\treturn this.loadGSTNdata();\n\t},\n\tmyfunchkAndNavigate :() =>\n\t{\n\t\tstoreValue(\"vayApplicationGSTN\", vayGSTNInput.text);\n\t\tstoreValue(\"vayApplicationIndConstitutionType\", vayGSTNRespConstitution.text)\n\t\tif(appsmith.store.vayApplicantRole == 'Financier')\n\t\t\t{\n\t\t\t\tconst response =  createCustomer.run(); \n\t \t\t\tif(!!response){\n\t\t \t\t\t\tshowAlert('Customer application record created')\n\t \t\t\t}else{\n\t\t  \t\t\tshowAlert('Customer application record creation failed...Contact Admin')\n\t \t\t\t}\t\n\t\t\t SendEmailToApplicant.run();\n\t\t\t\t return navigateTo('India Financier')\n\t\t\t\t\n\t\t\t}\n\t\telse\n\t\t\t{\n\t\tif(vayGSTNRespConstitution.text == \"LLP\" || vayGSTNRespConstitution.text == \"Public Limited Company\" || \t\t\tvayGSTNRespConstitution.text == \"LLC\" )\n\t\t{\n\t\t\t const response =  createCustomer.run(); \n\t \t\t\tif(!!response){\n\t\t \t\t\t\tshowAlert('Customer application record created')\n\t \t\t\t}else{\n\t\t  \t\t\tshowAlert('Customer application record creation failed...Contact Admin')\n\t \t\t\t}\n\t\t\tSendEmailToApplicant.run();\n\t\t\t return navigateTo('India - Corporate',{});\n\t\t}\n\telse{\n\t \t\t\tconst response =  createCustomer.run();\n\t\t\t\tif(!!response){\n\t\t \t\t\t\tshowAlert('Customer application record created')\n\t \t\t\t}else{\n\t\t  \t\t\tshowAlert('Customer application record creation failed...Contact Admin')\n\t \t\t\t}\t\n\t\tSendEmailToApplicant.run();\n\t \t\t\treturn navigateTo('India - Non Corporate',{});\n\t\t}\t\n\t}\n\t}\n}",
    "variables": []
  },
  "id": "Application Form - India_JSObject1",
  "deleted": false,
  "gitSyncId": "61e6589e69c0e21f279fec21_61f3acb413ce3d57dc7ba2a9"
}